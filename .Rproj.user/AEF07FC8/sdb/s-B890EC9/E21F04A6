{
    "collab_server" : "",
    "contents" : "#' Get ISSN LTWA\n#'\n#' Get the ISSN List of Title Word Abbreviations\n#'\n#' @param url chr string of pdf to pars\n#'\n#' @importFrom pdftools pdf_text\n#' @import dplyr\n#'\n#' @export\n#'\n#' @details\n#' The LTWA pdf is parsed from the online URL\n#'\n#' @return\n#' A three-column matrix with the word, abbreviation, and language\n#'\n#' @examples\n#' get_abbrev()\nget_abbrev <- function(url = 'http://www.issn.org/wp-content/uploads/2013/07/LTWA_20150724.pdf'){\n\n  langs <- c(\"afr\", \"alb\", \"arm\", \"aze\", \"baq\", \"bel\", \"bos\", \"bre\", \"bul\", \"cat\", \"cor\", \"cos\", \"crp\", \"cze\", \"dan\", \"dut\", \"eng\", \"est\", \"fin\", \"fre\", \"gem\", \"geo\", \"ger\", \"ger\", \"glg\", \"grc\", \"gre\", \"gre\", \"hrv\", \"hun\", \"ice\", \"iku\", \"ind\", \"ita\", \"kaz\", \"kir\", \"kur\", \"lat\", \"lav\", \"lit\", \"ltz\", \"mac\", \"may\", \"mlt\", \"mol\", \"mon\", \"mul\", \"nor\", \"pol\", \"por\", \"pro\", \"roa\", \"rum\", \"rus\", \"sla\", \"slo\", \"slv\", \"spa\", \"srp\", \"swe\", \"tat\", \"tur\", \"ukr\", \"und\", \"uzb\", \"wel\", \"yid\", \"yor\")\n\n  raw <- pdf_text(url)\n\n  # strsplit all\n  conv <- paste(raw, collapse = '\\\\r') %>%\n    strsplit(., '\\\\r') %>%\n    .[[1]] %>%\n    grep('LIST\\\\sOF\\\\sTITLE\\\\sWORD\\\\sABBREVIATIONS$|Page\\\\s[0-9]*$|LANGUAGES$', .,\n        value = TRUE, invert = TRUE) %>%\n    grep('^\\\\n$', ., value = TRUE, invert = TRUE) %>%\n    gsub('^\\\\n', '', .) %>%\n    strsplit(., '\\\\s\\\\s+')\n\n  # each list element should have three values\n  # some with two did not split correctly\n  twos <- which(unlist(lapply(conv, length)) == 2)\n  conv[twos] <- lapply(conv[twos], function(x){\n\n    tmp <- strsplit(paste(x, collapse = ' '), '\\\\s')[[1]][-1]\n\n    if(length(tmp) == 2) tmp <- c(tmp, 'n.a.')\n\n    tmp\n\n    })\n\n  conv <- do.call('rbind', conv)\n\n  return(conv)\n\n# # fine all non-alphanumeric characters\n# strsplit(conv, '') %>%\n#   unlist %>%\n#   grep('[^[:alnum:]]', ., value = T) %>%\n#   unique\n\n}\n\n\n\n\n",
    "created" : 1482188217834.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1856772156",
    "id" : "E21F04A6",
    "lastKnownWriteTime" : 1482252739,
    "last_content_update" : 1482252739877,
    "path" : "M:/docs/Jabbrev/R/get_abbrev.R",
    "project_path" : "R/get_abbrev.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}