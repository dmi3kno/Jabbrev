{
    "collab_server" : "",
    "contents" : "#' Get the abbreviated journal title\n#'\n#' Get the abbreviated journal title\n#'\n#' @param title chr string of the journal name\n#' @param rems chr string of prepositions or other words to remove from the journal title\n#'\n#' @return A chr string for the abbreviated journal title\n#' @export\n#'\n#' @import dplyr\n#'\n#' @examples\n#' abbrev('Journal of Applied Mathematics')\n#' abbrev('Fundamental and Applied Limnology')\n#' abbrev('Science')\nabbrev <- function(title, rems = c('and', 'of', '\\\\&', 'the', 'on')){\n\n  # remove prepositions\n  rems <- paste0('^', rems, '$', collapse = '|')\n  splits <- strsplit(title, '\\\\s') %>%\n    unlist %>%\n    grep(rems, ., value = TRUE, invert = TRUE, ignore.case = TRUE)\n\n  # check all as lower case\n  abb[, 1] <- tolower(abb[, 1]) %>%\n    gsub('-', '', .)\n\n  # get abbreviations\n  short <- sapply(splits, function(x){\n\n    # check if full or partial match\n    mtch <- grep(paste0('^', tolower(x), '$'), abb[, 1])\n    if(length(mtch) == 0){\n      mtch <- pmatch(abb[, 1], tolower(x), duplicates.ok = T)\n      mtch <- which(!is.na(mtch))\n    }\n\n    # select\n    if(length(mtch) == 0){\n      mtch <- x\n    } else {\n      mtch <- abb[mtch, , drop = FALSE] %>%\n        .[which.max(nchar(.[, 1])), 2]\n    }\n    if(mtch == 'n.a.') mtch <- x\n\n    return(mtch)\n\n    })\n\n  # combine shorts in a single string, make title case\n  short <- paste(short, collapse = ' ') %>%\n    capwords\n\n  return(short)\n\n}\n\n\n\n",
    "created" : 1482252752615.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1010205959",
    "id" : "21F39485",
    "lastKnownWriteTime" : 1482276344,
    "last_content_update" : 1482276344361,
    "path" : "M:/docs/Jabbrev/R/abbrev.R",
    "project_path" : "R/abbrev.R",
    "properties" : {
        "tempName" : "Untitled3"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}